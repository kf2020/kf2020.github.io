---
title: "320 Final Project"
author: "Amy, Katie, Shawdi"
date: "5/11/2019"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(stringr)
```

## R Markdown


```{r message=FALSE, warning=FALSE}
library(rvest)
library(tidyverse)
url <-"html_top100.txt"
college_urls <- url %>%
  read_html() %>%
  html_node("body") %>% html_nodes("ol[class~=bEyEue]") %>% html_nodes("li[id]")%>% html_nodes("h3") %>% 
html_nodes("a[href]") %>%
  html_attr("href") 
college_urls

```




```{r message=FALSE, warning=FALSE}
index_num <- 0

college_tab <-  data.frame("URL" = gsub(" ", "", paste("https://www.usnews.com",college_urls, sep = "")), 
"CollegeName"= NA, "TuitionFees" = 0, "RoomBoard" = 0, "TotalEnrollment" = 0, "SchoolType" = NA, "YearFounded" = 0, "ReligiousAffiliation" = NA, "AcademicCalendar" = NA, "Setting" = NA, "Endowment2017" = 0, "MedianStartingSalaryOfAlumni" = 0, "Selectivity" = NA, "Fall2017AcceptanceRate" = 0, "GenderDistribution" = 0, "FourYearGraduationRate" = 0, stringsAsFactors = FALSE) 

#college_tab$URL <- as.character(college_tab$URL)
college_tab

attach(college_tab)

college_tab


```


```{r message=FALSE, warning=FALSE}

my_url <- "https://www.usnews.com/best-colleges/princeton-university-2627"


attr <- my_url %>%
    read_html() %>% html_node("body") %>% html_nodes("div[id~=content-main]") %>%   
    html_nodes("section[class~=hero-stats-widget-stats]") %>%
    html_nodes("ul") %>% html_nodes("li") %>% html_nodes("strong")

for (i in 1:2){
  #1: tuition, 2: room&board
  factor <- attr[i] %>% html_text()
  substring(factor, 2, str_locate(factor, " ")[1] - 1)
}



a_1 <- attr[1] %>%
  html_text()

a_1 <- attr[1] %>%
  html_text()

a_1 <- attr[1] %>%
  html_text()

tuition <- substring(a_1, 2, str_locate(a_1, " ")[1] - 1)

tuition

attr[3]


```


```{r}

college_tab <- college_tab %>% mutate(coll_name = sub("^\n", "", college_tab$CollegeName))
college_sel <- college_tab %>% select(CollegeName, coll_name)
college_sel$coll_name
                                      
                                      
for (a in 1:nrow(college_tab)){
  college_tab[a,2] <- sub("^\n", "")
}

college_tab


#parse_data <- function(url, )
 # { 
#url_1 <- college_tab[1,]
#parsed_collegename <- url_1 %>% read_html() %>% html_node("body") %>% html_nodes("h1[class~=hero-heading]") %>% html_text()

#parsed_collegename
#}

```
